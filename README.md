# Delta Lake Lab - Quickstart with Docker and SBT

This repository contains **Scala examples for working with Delta Lake**, including:

- Creating and managing Delta tables
- Writing and overwriting data
- Exploring Delta metadata, `_delta_log`, and table history

This guide explains how to run the lab inside a Docker container with SBT installed.

## Environment Versions

- Docker image: `deltaio/delta-docker:latest`
- Scala: 2.13.16
- SBT: 1.11.7
- Spark: 4.0.0
- Delta Lake: 4.0.0

## 1. Start the Delta Docker container

Run the following command to start a container:

```bash
docker run --name delta-lake-lab --rm -it -p 4040:4040 -u root --entrypoint bash deltaio/delta-docker
````

* `--rm` → automatically remove the container when stopped
* `-p 4040:4040` → exposes Spark UI on port 4040
* `-u root` → run as root to install packages
* `--entrypoint bash` → opens a bash shell

## 2. Install SBT and utilities

Inside the container, run the following commands:

```bash
apt-get update
apt-get install -y apt-transport-https curl jq

# Adds the SBT repository key.
curl -sL "https://keyserver.ubuntu.com/pks/lookup?op=get&search=0x2EE0EA64E40A89B84B2DF73499E82A75642AC823" | apt-key add -

# Adds the SBT repository. 
echo "deb https://repo.scala-sbt.org/scalasbt/debian all main" | tee /etc/apt/sources.list.d/sbt.list

# Update again and install SBT. 
apt-get update
apt-get install -y sbt
```


## 3. Clone the lab repository

```bash
git clone https://github.com/CynicDog/delta-lake-lab.git
cd delta-lake-lab/delta-lake-lab
```

## 4. Project structure

```
delta-lake-lab/
├── build.sbt           # SBT build configuration
├── README.md           # This file
├── src/                # Scala source files
│   └── main/scala/
│       ├── DeltaApp.scala
│       └── 01_table_batch_reads_and_writes/
│           └── DeltaMetaExample.scala
└── target/             # SBT build outputs (ignored in Git)
```

## 5. Run the project

From inside the container, run:

```bash
sbt run
````
* SBT will compile your project and prompt you to select the main class. 
* Enter the number corresponding to the app you wish to run. 

## 6. Notes

* All directories generated by Spark or SBT (`target/`, `spark-warehouse/`, `project/`) are ignored in Git.
